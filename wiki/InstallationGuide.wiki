#summary Installation hints.
#labels Featured,Phase-Deploy

= Prerequisites =

You need [http://code.google.com/p/fuserl fuserl] and [http://code.google.com/p/fragmentron fragmentron].

You also need [http://support.process-one.net/doc/display/CONTRIBS/EUnit eunit] from process one.

= Installing =

The project uses automake.  The default prefix is /usr; if you don't like that, use the {{{--prefix}}} option to configure.

Running {{{make check}}} is strongly suggested.

= Hello World =

No nice mkfs util or anything right now.  Here's essentially what a mkfs.walken would do for you.  Start the Erlang emulator

{{{
% erl -sname $$ +A 10                    
Erlang (BEAM) emulator version 5.5.2 [source] [64-bit] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.5.2  (abort with ^G)
(5975@ubsrvvmw)1> ok = application:load (mnesia).
ok
(5975@ubsrvvmw)2> application:set_env (mnesia, dir, "/tmp/walkendata").
ok
(5975@ubsrvvmw)3> mnesia:start ().
ok
(5975@ubsrvvmw)4> { atomic, ok } = mnesia:change_table_copy_type (schema, node (), disc_copies).
{atomic,ok}
(5975@ubsrvvmw)5> ok = application:load (walkenfs).
ok
(5975@ubsrvvmw)6> ok = application:set_env (walkenfs, mount_point, "/tmp/walken").
ok
(5975@ubsrvvmw)7> file:make_dir ("/tmp/walken").
{error,eexist}
(5975@ubsrvvmw)8> walkenfs:start ().

=INFO REPORT==== 8-Mar-2008::19:10:27 ===
walkenfs attempting load of ets: auto_detect 321717412589622444982284875105537266341
Mnesia('5975@ubsrvvmw'): User event: {fragmentron,create_table,schema_extra}
ok
}}}
You should now have a walkenfs mounted at {{{/tmp/walken}}}.  The actual filesystem (mnesia) data is being stored in {{{/tmp/walkendata}}}.  Try stuff, see what happens. [[#1 1]] If you exit the Erlang shell it will get unmounted.  If you want to unmount cleanly, type
{{{
(5975@ubsrvvmw)9> init:stop ().
ok
(5975@ubsrvvmw)10>
}}}
in the emulator.


= Tested Platforms =

  * Ubuntu 64 bit Linux (feisty).
  * OS/X 10.4 i386: known *not* to work, I'm trying to figure it out.

= Footnotes =

== 1 ==

Try things *outside* the Erlang emulator.  Otherwise you will find it very easy to deadlock the file server.  Not sure why this happens yet.  In our production systems we run walkenfs in a separate Erlang emulator and always will (Erlang being an "implementation detail").